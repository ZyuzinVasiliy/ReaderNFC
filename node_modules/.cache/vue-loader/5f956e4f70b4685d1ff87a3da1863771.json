{"remainingRequest":"/Users/vasilijzuzin/Projects/mivezem/app/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/vasilijzuzin/Projects/mivezem/app/src/views/Home.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/vasilijzuzin/Projects/mivezem/app/src/views/Home.vue","mtime":1614266429005},{"path":"/Users/vasilijzuzin/Projects/mivezem/app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/vasilijzuzin/Projects/mivezem/app/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCgpleHBvcnQgZGVmYXVsdCB7CgogICAgbmFtZTogJ0hvbWUnLAoKICAgIGNvbXBvbmVudHM6IHsKICAgIH0sCgogICAgZGF0YSgpewogICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIHRhZyAgICAgOiAnJywKICAgICAgICAgICAgdGFnSWQgICA6ICcnLAogICAgICAgICAgICBtZXNzYWdlIDogJycKICAgICAgICB9CiAgICB9LAoKICAgIGFzeW5jIG1vdW50ZWQoKXsKICAgIH0sCgogICAgbWV0aG9kczogewoKICAgICAgICBzY2FuTkZDKCl7CiAgICAgICAgICAgIHdpbmRvdy5uZmMuZW5hYmxlZCgKICAgICAgICAgICAgICAgICgpID0+IHsKICAgICAgICAgICAgICAgICAgICAvLyBORkMgZW5hYmxlZAogICAgICAgICAgICAgICAgICAgIHRoaXMucmVnaXN0ZXJUYWdFdmVudCgpCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgKGVycm9yKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgaWYgKGVycm9yID09PSAnTkZDX0RJU0FCTEVEJykgewogICAgICAgICAgICAgICAgICAgICAgICAvLyBUcmlnZ2VyIHRoZSBwaG9uZSBzZXR0aW5ncyB0byBlbmFibGUgdGhlIE5GQyBzZXR0aW5ncwogICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubmZjLnNob3dTZXR0aW5ncygpCiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChlcnJvciA9PT0gJ05PX05GQycpIHsKICAgICAgICAgICAgICAgICAgICAgICAgYWxlcnQoJ0Nhbm5vdCBzY2FuIE5GQycsICgpID0+IHt9LCAnTm8gTkZDJywgJ09LJykKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICkKICAgICAgICB9LAoKICAgICAgICByZWdpc3RlclRhZ0V2ZW50ICgpIHsKICAgICAgICAgICAgYWxlcnQoJ2FkZE5kZWZMaXN0ZW5lcicpOwogICAgICAgICAgICB3aW5kb3cubmZjLmFkZE5kZWZMaXN0ZW5lcigKICAgICAgICAgICAgICAgICgpID0+ewogICAgICAgICAgICAgICAgICAgIGFsZXJ0KCdkaXNwbGF5TmRlZicpOwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICgpID0+IHsKICAgICAgICAgICAgICAgICAgICBhbGVydCgnc3VjY2Vlc3MgcmVnaXN0ZXJpbmcgbmRlZiBsaXN0ZW5lcicpOwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIChlcnJvcikgPT4gewogICAgICAgICAgICAgICAgICAgIGFsZXJ0KCdmYWlsdXJlIHJlZ2lzdGVyaW5nIG5kZWYgbGlzdGVuZXInKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgKTsKICAgICAgICAgICAgd2luZG93Lm5mYy5hZGRNaW1lVHlwZUxpc3RlbmVyKCJ0ZXh0L2JvZ3VzIiwKICAgICAgICAgICAgICAgICgpID0+ewogICAgICAgICAgICAgICAgICAgIGFsZXJ0KCdkaXNwbGF5TmRlZicpOwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICgpID0+IHsKICAgICAgICAgICAgICAgICAgICBhbGVydCgnc3VjY2Vlc3MgcmVnaXN0ZXJpbmcgbmRlZiBsaXN0ZW5lcicpOwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIChlcnJvcikgPT4gewogICAgICAgICAgICAgICAgICAgIGFsZXJ0KCdmYWlsdXJlIHJlZ2lzdGVyaW5nIG5kZWYgbGlzdGVuZXInKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgKTsKICAgICAgICB9LAoKICAgICAgICBkaXNwbGF5TmRlZiAobmZjRXZlbnQpIHsKICAgICAgICAgICAgLy8gRGVjb2RlIHRhZyBkYXRhIGZyb20gdGhlIHBsdWdpbgogICAgICAgICAgICB0aGlzLnRhZyAgICAgPSBuZmNFdmVudC50YWcKICAgICAgICAgICAgdGhpcy50YWdJZCAgID0gd2luZG93Lm5mYy5ieXRlc1RvSGV4U3RyaW5nKHRoaXMudGFnLmlkKQogICAgICAgICAgICB0aGlzLm1lc3NhZ2UgPSB3aW5kb3cubmZjLmJ5dGVzVG9TdHJpbmcodGhpcy50YWcubmRlZk1lc3NhZ2VbMF0ucGF5bG9hZCkKICAgICAgICB9LAoKICAgICAgICBkZWFjdGl2YXRlZCAoKSB7CiAgICAgICAgICAgIGFsZXJ0KCdyZW1vdmVOZGVmTGlzdGVuZXInKTsKICAgICAgICAgICAgd2luZG93Lm5mYy5yZW1vdmVOZGVmTGlzdGVuZXIoKCkgPT57YWxlcnQoJ2Rpc3BsYXlOZGVmJyl9KQogICAgICAgIH0sCgogICAgfQp9Cgo="},{"version":3,"sources":["Home.vue"],"names":[],"mappings":";;;;;;;;;;;;;;AAcA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA","file":"Home.vue","sourceRoot":"src/views","sourcesContent":["<template>\n    <div>\n        <br>\n        <a v-on:click=\"scanNFC()\" class=\"btn\">Включить NFC</a>\n        <a v-on:click=\"deactivated()\" class=\"btn\">Отключить NFC</a>\n        <br><br>\n        <p><b>Данные транспортной карты:</b></p>\n        <p>tagId:   {{tagId}}</p>\n        <p>message: {{message}}</p>\n    </div>\n</template>\n\n<script>\n\nexport default {\n\n    name: 'Home',\n\n    components: {\n    },\n\n    data(){\n        return {\n            tag     : '',\n            tagId   : '',\n            message : ''\n        }\n    },\n\n    async mounted(){\n    },\n\n    methods: {\n\n        scanNFC(){\n            window.nfc.enabled(\n                () => {\n                    // NFC enabled\n                    this.registerTagEvent()\n                },\n                (error) => {\n                    if (error === 'NFC_DISABLED') {\n                        // Trigger the phone settings to enable the NFC settings\n                        window.nfc.showSettings()\n                    } else if (error === 'NO_NFC') {\n                        alert('Cannot scan NFC', () => {}, 'No NFC', 'OK')\n                    }\n                }\n            )\n        },\n\n        registerTagEvent () {\n            alert('addNdefListener');\n            window.nfc.addNdefListener(\n                () =>{\n                    alert('displayNdef');\n                },\n                () => {\n                    alert('succeess registering ndef listener');\n                },\n                (error) => {\n                    alert('failure registering ndef listener');\n                }\n            );\n            window.nfc.addMimeTypeListener(\"text/bogus\",\n                () =>{\n                    alert('displayNdef');\n                },\n                () => {\n                    alert('succeess registering ndef listener');\n                },\n                (error) => {\n                    alert('failure registering ndef listener');\n                }\n            );\n        },\n\n        displayNdef (nfcEvent) {\n            // Decode tag data from the plugin\n            this.tag     = nfcEvent.tag\n            this.tagId   = window.nfc.bytesToHexString(this.tag.id)\n            this.message = window.nfc.bytesToString(this.tag.ndefMessage[0].payload)\n        },\n\n        deactivated () {\n            alert('removeNdefListener');\n            window.nfc.removeNdefListener(() =>{alert('displayNdef')})\n        },\n\n    }\n}\n\n</script>\n\n<style>\n    a{\n        display: block;\n        margin: 20px auto;\n        width: 170px;\n        padding-top: 10px;\n        padding-bottom: 10px;\n        text-align: center;\n        border: 1px solid  #000;\n        cursor: pointer;\n    }\n</style>"]}]}